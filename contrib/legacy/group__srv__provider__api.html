<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>ICd2: Service Provider API</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Service Provider API</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structicd__srv__api.html">icd_srv_api</a></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#gcd9b9958f4db9887a581c84c284e8526">ICD_SRV_MODULE_VERSION</a>&nbsp;&nbsp;&nbsp;ICD_NW_MODULE_VERSION</td></tr>

<tr><td colspan="2"><br><h2>Typedefs</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g133c4075a05f31f44c2d169fc2f03d70">icd_srv_identify_cb_fn</a> )(const enum <a class="el" href="group__srv__provider__api.html#g5056dc1f300b5706752723839d209fc7">icd_srv_identify_status</a> status, const gchar *service_type, const gchar *service_name, const guint service_attrs, const gchar *service_id, const gint service_priority, const gchar *network_type, const guint network_attrs, const gchar *network_id, gpointer identify_cb_token)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#gaa4e53cbea0a7e6ca2b7ab5df2f19af0">icd_srv_identify_fn</a> )(enum <a class="el" href="group__dbus__api.html#g8686ca765f1a7913b2e5e062314e6d2f">icd_scan_status</a> status, const gchar *network_type, const gchar *network_name, const guint network_attrs, const gchar *network_id, const guint network_priority, enum <a class="el" href="group__network__module__api.html#ga079af484ca6b668db044019a4a98fd4">icd_nw_levels</a> signal, const gchar *station_id, const gint dB, <a class="el" href="group__srv__provider__api.html#g133c4075a05f31f44c2d169fc2f03d70">icd_srv_identify_cb_fn</a> identify_cb, gpointer identify_cb_token, gpointer *private)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g6af20152b0040cb7641f65c45abc53a2">icd_srv_disconnect_cb_fn</a> )(enum <a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a> status, gpointer disconnect_cb_token)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g19a7d117b0142cbbf76f561d9a4873a9">icd_srv_disconnect_fn</a> )(const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id, const gchar *interface_name, <a class="el" href="group__srv__provider__api.html#g6af20152b0040cb7641f65c45abc53a2">icd_srv_disconnect_cb_fn</a> disconnect_cb, gpointer disconnect_cb_token, gpointer *private)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#gd66781d3877c679dec6fdee1d94beef9">icd_srv_connect_cb_fn</a> )(enum <a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a> status, const gchar *err_str, gpointer connect_cb_token)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g989a6a10d13b66892794d5429e0bd2f8">icd_srv_connect_fn</a> )(const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id, const gchar *interface_name, <a class="el" href="group__srv__provider__api.html#gd66781d3877c679dec6fdee1d94beef9">icd_srv_connect_cb_fn</a> connect_cb, gpointer connect_cb_token, gpointer *private)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#gcef61446c9b06a70d3bb53d682d8f087">icd_srv_child_exit_fn</a> )(const pid_t pid, const gint exit_status, gpointer *private)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g6f7bbd4c90097f8d24b5bf3ad6dc403b">icd_srv_destruct_fn</a> )(gpointer *private)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#gd361d59d8b8830501aa25b8c15d962b8">icd_srv_watch_pid_fn</a> )(const pid_t pid, gpointer watch_cb_token)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#gca2582aeacfdcf2c9f3fdd6c378d84d9">icd_srv_close_fn</a> )(enum <a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a> status, const gchar *err_str, const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef void(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g82c65464fa612225ffb3a9e9e3e85b6e">icd_srv_limited_conn_fn</a> )(const enum <a class="el" href="group__srv__provider__api.html#g962d7979b6c0190e1118436fd1ca706c">icd_srv_limited_conn_status</a> conn_status, const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">typedef gboolean(*&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g4daa562787efb8846f781769616873c4">icd_srv_init_fn</a> )(struct <a class="el" href="structicd__srv__api.html">icd_srv_api</a> *srv_api, <a class="el" href="group__srv__provider__api.html#gd361d59d8b8830501aa25b8c15d962b8">icd_srv_watch_pid_fn</a> watch_cb, gpointer watch_cb_token, <a class="el" href="group__srv__provider__api.html#gca2582aeacfdcf2c9f3fdd6c378d84d9">icd_srv_close_fn</a> close, <a class="el" href="group__srv__provider__api.html#g82c65464fa612225ffb3a9e9e3e85b6e">icd_srv_limited_conn_fn</a> limited_conn)</td></tr>

<tr><td colspan="2"><br><h2>Enumerations</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a> { <a class="el" href="group__srv__provider__api.html#gg464a2d50d0fd8c040456dbd9a188c5cd00ac9cd55eb84ed298df4404d528a9e9">ICD_SRV_SUCCESS</a> =  0, 
<a class="el" href="group__srv__provider__api.html#gg464a2d50d0fd8c040456dbd9a188c5cdcb3378b136699f4fc594122f43f02533">ICD_SRV_RESTART</a> =  1, 
<a class="el" href="group__srv__provider__api.html#gg464a2d50d0fd8c040456dbd9a188c5cdd018bc6d5a5cfc42ae21baaa2c01e2f6">ICD_SRV_ERROR</a> =  2
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g5056dc1f300b5706752723839d209fc7">icd_srv_identify_status</a> { <a class="el" href="group__srv__provider__api.html#gg5056dc1f300b5706752723839d209fc77cc4b534e22e8f6a0b0d8eeacc0ea30b">ICD_SRV_UNKNOWN</a> =  0, 
<a class="el" href="group__srv__provider__api.html#gg5056dc1f300b5706752723839d209fc717403b69fe3d10bdad7f3edd5f02bc0c">ICD_SRV_IDENTIFIED</a> =  1, 
<a class="el" href="group__srv__provider__api.html#gg5056dc1f300b5706752723839d209fc79af996fcc8b01748afcee2ea03e2a182">ICD_SRV_CONTINUE</a> =  8
 }</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__srv__provider__api.html#g962d7979b6c0190e1118436fd1ca706c">icd_srv_limited_conn_status</a> { <a class="el" href="group__srv__provider__api.html#gg962d7979b6c0190e1118436fd1ca706cd20d58291a36d8ff0ac7bb1053a8c19c">ICD_SRV_LIMITED_CONN_DISABLED</a> =  0, 
<a class="el" href="group__srv__provider__api.html#gg962d7979b6c0190e1118436fd1ca706c676101e140d4ab2b4f64054107079060">ICD_SRV_LIMITED_CONN_ENABLED</a> =  1
 }</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The service provider API is considered beta quality, it may still be modified at some point.<p>
The service provider API makes it possible to run tasks after an IP address has been acquired in the network module ip layer but before the network is announced to applications as being connected. The settings for a service module include the network types the service module is interested in, whereby the <a class="el" href="group__srv__provider__api.html#gaa4e53cbea0a7e6ca2b7ab5df2f19af0">icd_srv_identify_fn()</a> is called whenever there is a scan result available with a matching network type. In this way e.g. hotspot WLAN networks can be supported, since they need IP layer connectivity in order to reach an authentication service that usually means posting credentials on a web page. <p>
In order for the network connection with an associated service module to succeed, <a class="el" href="group__srv__provider__api.html#gd66781d3877c679dec6fdee1d94beef9">icd_srv_connect_cb_fn()</a> needs to be called with an <a class="el" href="group__srv__provider__api.html#gg464a2d50d0fd8c040456dbd9a188c5cd00ac9cd55eb84ed298df4404d528a9e9">ICD_SRV_SUCCESS</a> status code. On error conditions or when closing the network connection the optional <a class="el" href="group__srv__provider__api.html#g19a7d117b0142cbbf76f561d9a4873a9">icd_srv_disconnect_fn()</a> function is called, whereafter the network is disconnected as described in <a class="el" href="group__network__module__api.html">Network module API</a>. <p>
The following service module settings are located at the gconf path <code>/system/osso/connectivity/srv_provider/</code><em>&lt;service type name&gt;</em>: <ul>
<li>
<code>module</code> Name of the shared service provider module that implements this service. </li>
<li>
<code>network_type</code> A list of strings where each string contains the name of the network types this service is interested in. </li>
</ul>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="gcd9b9958f4db9887a581c84c284e8526"></a><!-- doxytag: member="srv_provider_api.h::ICD_SRV_MODULE_VERSION" ref="gcd9b9958f4db9887a581c84c284e8526" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ICD_SRV_MODULE_VERSION&nbsp;&nbsp;&nbsp;ICD_NW_MODULE_VERSION          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Service provider module version equal to the network module version 
</div>
</div><p>
<hr><h2>Typedef Documentation</h2>
<a class="anchor" name="gcef61446c9b06a70d3bb53d682d8f087"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_child_exit_fn" ref="gcef61446c9b06a70d3bb53d682d8f087" args=")(const pid_t pid, const gint exit_status, gpointer *private)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#gcef61446c9b06a70d3bb53d682d8f087">icd_srv_child_exit_fn</a>)(const pid_t pid, const gint exit_status, gpointer *private)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Notification function for child process termination <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pid</em>&nbsp;</td><td>the process id that exited </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>exit_value</em>&nbsp;</td><td>process exit value </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>private</em>&nbsp;</td><td>a reference to the <a class="el" href="structicd__nw__api.html">icd_nw_api</a> private member </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gca2582aeacfdcf2c9f3fdd6c378d84d9"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_close_fn" ref="gca2582aeacfdcf2c9f3fdd6c378d84d9" args=")(enum icd_srv_status status, const gchar *err_str, const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#gca2582aeacfdcf2c9f3fdd6c378d84d9">icd_srv_close_fn</a>)(enum <a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a> status, const gchar *err_str, const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prototype for the module to request closing down its connection due to internal or external events. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>reason for closing; <a class="el" href="group__srv__provider__api.html#gg464a2d50d0fd8c040456dbd9a188c5cdcb3378b136699f4fc594122f43f02533">ICD_SRV_RESTART</a> if the connection needs to be restarted, success or error will both close the network connection </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err_str</em>&nbsp;</td><td>NULL if the service provisioning was disconnected normally or any ICD_DBUS_ERROR_* from osso-ic-dbus.h on error </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_type</em>&nbsp;</td><td>the service type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_attrs</em>&nbsp;</td><td>attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_id</em>&nbsp;</td><td>internal service id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_type</em>&nbsp;</td><td>the network type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_attrs</em>&nbsp;</td><td>network attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_id</em>&nbsp;</td><td>network id </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gd66781d3877c679dec6fdee1d94beef9"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_connect_cb_fn" ref="gd66781d3877c679dec6fdee1d94beef9" args=")(enum icd_srv_status status, const gchar *err_str, gpointer connect_cb_token)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#gd66781d3877c679dec6fdee1d94beef9">icd_srv_connect_cb_fn</a>)(enum <a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a> status, const gchar *err_str, gpointer connect_cb_token)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Connect callback for the service provider module <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>status of the connect attempt; with ICD_SRV_RESTART the IAP will be disconnected and reconnected again </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>err_str</em>&nbsp;</td><td>error string or NULL on success </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>connect_cb_token</em>&nbsp;</td><td>token passed to the connect function </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g989a6a10d13b66892794d5429e0bd2f8"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_connect_fn" ref="g989a6a10d13b66892794d5429e0bd2f8" args=")(const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id, const gchar *interface_name, icd_srv_connect_cb_fn connect_cb, gpointer connect_cb_token, gpointer *private)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#g989a6a10d13b66892794d5429e0bd2f8">icd_srv_connect_fn</a>)(const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id, const gchar *interface_name, <a class="el" href="group__srv__provider__api.html#gd66781d3877c679dec6fdee1d94beef9">icd_srv_connect_cb_fn</a> connect_cb, gpointer connect_cb_token, gpointer *private)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Connect (or authenticate) with a service provider. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>service_type</em>&nbsp;</td><td>service type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_attrs</em>&nbsp;</td><td>service attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_id</em>&nbsp;</td><td>internal id identifying the service </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_type</em>&nbsp;</td><td>type of network connected to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_attrs</em>&nbsp;</td><td>network attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_id</em>&nbsp;</td><td>network identification </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>interface_name</em>&nbsp;</td><td>network interface used </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>connect_cb</em>&nbsp;</td><td>callback to call when connection attempt is completed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>connect_cb_token</em>&nbsp;</td><td>token to pass to the callback </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>private</em>&nbsp;</td><td>reference to the private <a class="el" href="structicd__srv__api.html">icd_srv_api</a> member </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g6f7bbd4c90097f8d24b5bf3ad6dc403b"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_destruct_fn" ref="g6f7bbd4c90097f8d24b5bf3ad6dc403b" args=")(gpointer *private)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#g6f7bbd4c90097f8d24b5bf3ad6dc403b">icd_srv_destruct_fn</a>)(gpointer *private)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destruction function that cleans up after the module. The list of network and service types in the <a class="el" href="structicd__srv__api.html">icd_srv_api</a> structure is deleted by ICd. The destruction function will not be called before all child processes have exited. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>private</em>&nbsp;</td><td>a reference to the <a class="el" href="structicd__nw__api.html">icd_nw_api</a> private member </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g6af20152b0040cb7641f65c45abc53a2"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_disconnect_cb_fn" ref="g6af20152b0040cb7641f65c45abc53a2" args=")(enum icd_srv_status status, gpointer disconnect_cb_token)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#g6af20152b0040cb7641f65c45abc53a2">icd_srv_disconnect_cb_fn</a>)(enum <a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a> status, gpointer disconnect_cb_token)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disconnect callback for the service provider module <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>status of the disconnect, ignored for now </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>disconnect_cb_token</em>&nbsp;</td><td>token passed to the disconnect function </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g19a7d117b0142cbbf76f561d9a4873a9"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_disconnect_fn" ref="g19a7d117b0142cbbf76f561d9a4873a9" args=")(const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id, const gchar *interface_name, icd_srv_disconnect_cb_fn disconnect_cb, gpointer disconnect_cb_token, gpointer *private)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#g19a7d117b0142cbbf76f561d9a4873a9">icd_srv_disconnect_fn</a>)(const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id, const gchar *interface_name, <a class="el" href="group__srv__provider__api.html#g6af20152b0040cb7641f65c45abc53a2">icd_srv_disconnect_cb_fn</a> disconnect_cb, gpointer disconnect_cb_token, gpointer *private)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Disconnect function for the service provider module <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>service_type</em>&nbsp;</td><td>service type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_attrs</em>&nbsp;</td><td>service attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_id</em>&nbsp;</td><td>internal id identifying the service </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_type</em>&nbsp;</td><td>type of network connected to </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_attrs</em>&nbsp;</td><td>network attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_id</em>&nbsp;</td><td>network identification </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>interface_name</em>&nbsp;</td><td>network interface used </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>disconnect_cb</em>&nbsp;</td><td>callback to call when disconnection is completed </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>disconnect_cb_token</em>&nbsp;</td><td>token to pass to the callback </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>private</em>&nbsp;</td><td>reference to the private <a class="el" href="structicd__srv__api.html">icd_srv_api</a> member </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g133c4075a05f31f44c2d169fc2f03d70"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_identify_cb_fn" ref="g133c4075a05f31f44c2d169fc2f03d70" args=")(const enum icd_srv_identify_status status, const gchar *service_type, const gchar *service_name, const guint service_attrs, const gchar *service_id, const gint service_priority, const gchar *network_type, const guint network_attrs, const gchar *network_id, gpointer identify_cb_token)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#g133c4075a05f31f44c2d169fc2f03d70">icd_srv_identify_cb_fn</a>)(const enum <a class="el" href="group__srv__provider__api.html#g5056dc1f300b5706752723839d209fc7">icd_srv_identify_status</a> status, const gchar *service_type, const gchar *service_name, const guint service_attrs, const gchar *service_id, const gint service_priority, const gchar *network_type, const guint network_attrs, const gchar *network_id, gpointer identify_cb_token)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Service identification callback. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>status of the identification procedure </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_type</em>&nbsp;</td><td>service type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_name</em>&nbsp;</td><td>name of the service provider displayable to the user/UI </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_attrs</em>&nbsp;</td><td>service attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_id</em>&nbsp;</td><td>internal service id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_priority</em>&nbsp;</td><td>priority within a service type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_type</em>&nbsp;</td><td>network type that was identified </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_attrs</em>&nbsp;</td><td>network attributes that were identified </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_id</em>&nbsp;</td><td>network id that was identified </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>identify_cb_token</em>&nbsp;</td><td>the token passed to the identification function </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gaa4e53cbea0a7e6ca2b7ab5df2f19af0"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_identify_fn" ref="gaa4e53cbea0a7e6ca2b7ab5df2f19af0" args=")(enum icd_scan_status status, const gchar *network_type, const gchar *network_name, const guint network_attrs, const gchar *network_id, const guint network_priority, enum icd_nw_levels signal, const gchar *station_id, const gint dB, icd_srv_identify_cb_fn identify_cb, gpointer identify_cb_token, gpointer *private)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#gaa4e53cbea0a7e6ca2b7ab5df2f19af0">icd_srv_identify_fn</a>)(enum <a class="el" href="group__dbus__api.html#g8686ca765f1a7913b2e5e062314e6d2f">icd_scan_status</a> status, const gchar *network_type, const gchar *network_name, const guint network_attrs, const gchar *network_id, const guint network_priority, enum <a class="el" href="group__network__module__api.html#ga079af484ca6b668db044019a4a98fd4">icd_nw_levels</a> signal, const gchar *station_id, const gint dB, <a class="el" href="group__srv__provider__api.html#g133c4075a05f31f44c2d169fc2f03d70">icd_srv_identify_cb_fn</a> identify_cb, gpointer identify_cb_token, gpointer *private)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Identify whether a given network is usable with this service provider. Even though this function has a callback, it is important that the decision is made as fast as possible in order not to slow down network scan processing. The service provider and network modules have to have a common understanding of both network_attrs and network_id parameters. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>status</em>&nbsp;</td><td>status, see <a class="el" href="group__dbus__api.html#g8686ca765f1a7913b2e5e062314e6d2f">icd_scan_status</a> </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_type</em>&nbsp;</td><td>network type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_name</em>&nbsp;</td><td>name of the network displayable to the user </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_attrs</em>&nbsp;</td><td>network attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_id</em>&nbsp;</td><td>network identification </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>signal</em>&nbsp;</td><td>signal strength </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>station_id</em>&nbsp;</td><td>station id, e.g. MAC address or similar id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dB</em>&nbsp;</td><td>absolute signal strength value in dB </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>identify_cb</em>&nbsp;</td><td>callback to call when the identification has been done </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>identify_cb_token</em>&nbsp;</td><td>token to pass to the identification callback </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g4daa562787efb8846f781769616873c4"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_init_fn" ref="g4daa562787efb8846f781769616873c4" args=")(struct icd_srv_api *srv_api, icd_srv_watch_pid_fn watch_cb, gpointer watch_cb_token, icd_srv_close_fn close, icd_srv_limited_conn_fn limited_conn)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef gboolean(* <a class="el" href="group__srv__provider__api.html#g4daa562787efb8846f781769616873c4">icd_srv_init_fn</a>)(struct <a class="el" href="structicd__srv__api.html">icd_srv_api</a> *srv_api, <a class="el" href="group__srv__provider__api.html#gd361d59d8b8830501aa25b8c15d962b8">icd_srv_watch_pid_fn</a> watch_cb, gpointer watch_cb_token, <a class="el" href="group__srv__provider__api.html#gca2582aeacfdcf2c9f3fdd6c378d84d9">icd_srv_close_fn</a> close, <a class="el" href="group__srv__provider__api.html#g82c65464fa612225ffb3a9e9e3e85b6e">icd_srv_limited_conn_fn</a> limited_conn)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prototype for the service api initialization function. ICd searches each library for an instance of this function prototype called 'icd_srv_init'. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>srv_api</em>&nbsp;</td><td><a class="el" href="structicd__srv__api.html">icd_srv_api</a> structure to be filled in by the module </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>watch_cb</em>&nbsp;</td><td>function to inform ICd that a child process is to be monitored for exit status </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>watch_cb_token</em>&nbsp;</td><td>token to pass to the pid watch function </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>close_cb</em>&nbsp;</td><td>function to inform ICd that the network connection is to be closed </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>TRUE on success, FALSE on failure whereby the module will be immediately unloaded </dd></dl>

</div>
</div><p>
<a class="anchor" name="g82c65464fa612225ffb3a9e9e3e85b6e"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_limited_conn_fn" ref="g82c65464fa612225ffb3a9e9e3e85b6e" args=")(const enum icd_srv_limited_conn_status conn_status, const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#g82c65464fa612225ffb3a9e9e3e85b6e">icd_srv_limited_conn_fn</a>)(const enum <a class="el" href="group__srv__provider__api.html#g962d7979b6c0190e1118436fd1ca706c">icd_srv_limited_conn_status</a> conn_status, const gchar *service_type, const guint service_attrs, const gchar *service_id, const gchar *network_type, const guint network_attrs, const gchar *network_id)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Inform about enabled or disabled limited connectivity for service providing purposes. An example of limited connectivity is a network that allows IP connections only to certain authenticaion/log in server until the service module has finished its task. It is fully optional to use this function and full connectivity will be signalled when the network is connected. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>conn_status</em>&nbsp;</td><td>whether limited connectivity is enabled or disabled </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_type</em>&nbsp;</td><td>the service type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_attrs</em>&nbsp;</td><td>attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>service_id</em>&nbsp;</td><td>internal service id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_type</em>&nbsp;</td><td>the network type </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_attrs</em>&nbsp;</td><td>network attributes </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>network_id</em>&nbsp;</td><td>network id </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gd361d59d8b8830501aa25b8c15d962b8"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_watch_pid_fn" ref="gd361d59d8b8830501aa25b8c15d962b8" args=")(const pid_t pid, gpointer watch_cb_token)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* <a class="el" href="group__srv__provider__api.html#gd361d59d8b8830501aa25b8c15d962b8">icd_srv_watch_pid_fn</a>)(const pid_t pid, gpointer watch_cb_token)          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Prototype function for notifying ICd that a child process has been started. The network destruction function will not be called before all child processes have exited. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>pid</em>&nbsp;</td><td>process id </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>watch_cb_token</em>&nbsp;</td><td>the watch callback token given on initialization </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Enumeration Type Documentation</h2>
<a class="anchor" name="g5056dc1f300b5706752723839d209fc7"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_identify_status" ref="g5056dc1f300b5706752723839d209fc7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__srv__provider__api.html#g5056dc1f300b5706752723839d209fc7">icd_srv_identify_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
status of the network identification, use OR to add parts together <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg5056dc1f300b5706752723839d209fc77cc4b534e22e8f6a0b0d8eeacc0ea30b"></a><!-- doxytag: member="ICD_SRV_UNKNOWN" ref="gg5056dc1f300b5706752723839d209fc77cc4b534e22e8f6a0b0d8eeacc0ea30b" args="" -->ICD_SRV_UNKNOWN</em>&nbsp;</td><td>
the network is not identified by this service provider </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg5056dc1f300b5706752723839d209fc717403b69fe3d10bdad7f3edd5f02bc0c"></a><!-- doxytag: member="ICD_SRV_IDENTIFIED" ref="gg5056dc1f300b5706752723839d209fc717403b69fe3d10bdad7f3edd5f02bc0c" args="" -->ICD_SRV_IDENTIFIED</em>&nbsp;</td><td>
the network is identified to be used by this service provider </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg5056dc1f300b5706752723839d209fc79af996fcc8b01748afcee2ea03e2a182"></a><!-- doxytag: member="ICD_SRV_CONTINUE" ref="gg5056dc1f300b5706752723839d209fc79af996fcc8b01748afcee2ea03e2a182" args="" -->ICD_SRV_CONTINUE</em>&nbsp;</td><td>
whether there will be more identify results to come </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="g962d7979b6c0190e1118436fd1ca706c"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_limited_conn_status" ref="g962d7979b6c0190e1118436fd1ca706c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__srv__provider__api.html#g962d7979b6c0190e1118436fd1ca706c">icd_srv_limited_conn_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Enabled/disabled limited connectivity status values <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg962d7979b6c0190e1118436fd1ca706cd20d58291a36d8ff0ac7bb1053a8c19c"></a><!-- doxytag: member="ICD_SRV_LIMITED_CONN_DISABLED" ref="gg962d7979b6c0190e1118436fd1ca706cd20d58291a36d8ff0ac7bb1053a8c19c" args="" -->ICD_SRV_LIMITED_CONN_DISABLED</em>&nbsp;</td><td>
Limited connectivity is disabled </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg962d7979b6c0190e1118436fd1ca706c676101e140d4ab2b4f64054107079060"></a><!-- doxytag: member="ICD_SRV_LIMITED_CONN_ENABLED" ref="gg962d7979b6c0190e1118436fd1ca706c676101e140d4ab2b4f64054107079060" args="" -->ICD_SRV_LIMITED_CONN_ENABLED</em>&nbsp;</td><td>
Limited connectivity is enabled </td></tr>
</table>
</dl>

</div>
</div><p>
<a class="anchor" name="g464a2d50d0fd8c040456dbd9a188c5cd"></a><!-- doxytag: member="srv_provider_api.h::icd_srv_status" ref="g464a2d50d0fd8c040456dbd9a188c5cd" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__srv__provider__api.html#g464a2d50d0fd8c040456dbd9a188c5cd">icd_srv_status</a>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
status of the <a class="el" href="structicd__srv__api.html">icd_srv_api</a> function call returned in the callback <dl compact><dt><b>Enumerator: </b></dt><dd>
<table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" name="gg464a2d50d0fd8c040456dbd9a188c5cd00ac9cd55eb84ed298df4404d528a9e9"></a><!-- doxytag: member="ICD_SRV_SUCCESS" ref="gg464a2d50d0fd8c040456dbd9a188c5cd00ac9cd55eb84ed298df4404d528a9e9" args="" -->ICD_SRV_SUCCESS</em>&nbsp;</td><td>
service provider (authentication) functionality succeeded; network connection is functioning </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg464a2d50d0fd8c040456dbd9a188c5cdcb3378b136699f4fc594122f43f02533"></a><!-- doxytag: member="ICD_SRV_RESTART" ref="gg464a2d50d0fd8c040456dbd9a188c5cdcb3378b136699f4fc594122f43f02533" args="" -->ICD_SRV_RESTART</em>&nbsp;</td><td>
restart this IAP; ICd will call all <a class="el" href="structicd__nw__api.html">icd_nw_api</a> '_down' functions for the associated network module and then restart from link_up all the way to the service API </td></tr>
<tr><td valign="top"><em><a class="anchor" name="gg464a2d50d0fd8c040456dbd9a188c5cdd018bc6d5a5cfc42ae21baaa2c01e2f6"></a><!-- doxytag: member="ICD_SRV_ERROR" ref="gg464a2d50d0fd8c040456dbd9a188c5cdd018bc6d5a5cfc42ae21baaa2c01e2f6" args="" -->ICD_SRV_ERROR</em>&nbsp;</td><td>
error; the IAP will be disconnected </td></tr>
</table>
</dl>

</div>
</div><p>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Mar 11 09:04:50 2010 for ICd2 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
